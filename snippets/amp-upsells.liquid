<script>
document.addEventListener("click", function (event) {
    event.stopImmediatePropagation(event);
    const button = event.target.closest("form[action='/cart/add'] button.btn--primary, form[action='/cart/add'] button.btn--primary *");
        if (button) {
            console.log("clicked")
            try {
                setTimeout(function () {
                window.AMP_API.OPEN_CART()
                }, 600);

            } catch (err) {
            console.error(err);
            }
        }
    },
    false
);  

window.AMP_CART_UPDATED = function(cart) {
  const cartCountEl = document.querySelector(".header__cart__status");

  if (!cartCountEl) return;

  cartCountEl.setAttribute("data-cart-count", cart.item_count);

  cartCountEl.innerText = cart.item_count;

  if (cart.item_count > 0) {
    cartCountEl.style.display = 'inline-flex';
    cartCountEl.style.justifyContent = 'center';
  } else {
    cartCountEl.style.display = 'none';
  }
};
</script>